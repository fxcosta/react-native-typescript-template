3c4ff81c0df4ee43f8928dc9124ec919
var _inGuard = 0;

var _globalHandler = function onError(e, isFatal) {
  throw e;
};

var ErrorUtils = {
  setGlobalHandler: function setGlobalHandler(fun) {
    _globalHandler = fun;
  },
  getGlobalHandler: function getGlobalHandler() {
    return _globalHandler;
  },
  reportError: function reportError(error) {
    _globalHandler && _globalHandler(error, false);
  },
  reportFatalError: function reportFatalError(error) {
    _globalHandler && _globalHandler(error, true);
  },
  applyWithGuard: function applyWithGuard(fun, context, args, unused_onError, unused_name) {
    try {
      _inGuard++;
      return fun.apply(context, args);
    } catch (e) {
      ErrorUtils.reportError(e);
    } finally {
      _inGuard--;
    }

    return null;
  },
  applyWithGuardIfNeeded: function applyWithGuardIfNeeded(fun, context, args) {
    if (ErrorUtils.inGuard()) {
      return fun.apply(context, args);
    } else {
      ErrorUtils.applyWithGuard(fun, context, args);
    }

    return null;
  },
  inGuard: function inGuard() {
    return !!_inGuard;
  },
  guard: function guard(fun, name, context) {
    var _ref;

    if (typeof fun !== 'function') {
      console.warn('A function must be passed to ErrorUtils.guard, got ', fun);
      return null;
    }

    var guardName = (_ref = name != null ? name : fun.name) != null ? _ref : '<generated guard>';

    function guarded() {
      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      return ErrorUtils.applyWithGuard(fun, context != null ? context : this, args, null, guardName);
    }

    return guarded;
  }
};
global.ErrorUtils = ErrorUtils;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImVycm9yLWd1YXJkLmpzIl0sIm5hbWVzIjpbIl9pbkd1YXJkIiwiX2dsb2JhbEhhbmRsZXIiLCJvbkVycm9yIiwiZSIsImlzRmF0YWwiLCJFcnJvclV0aWxzIiwic2V0R2xvYmFsSGFuZGxlciIsImZ1biIsImdldEdsb2JhbEhhbmRsZXIiLCJyZXBvcnRFcnJvciIsImVycm9yIiwicmVwb3J0RmF0YWxFcnJvciIsImFwcGx5V2l0aEd1YXJkIiwiY29udGV4dCIsImFyZ3MiLCJ1bnVzZWRfb25FcnJvciIsInVudXNlZF9uYW1lIiwiYXBwbHkiLCJhcHBseVdpdGhHdWFyZElmTmVlZGVkIiwiaW5HdWFyZCIsImd1YXJkIiwibmFtZSIsImNvbnNvbGUiLCJ3YXJuIiwiZ3VhcmROYW1lIiwiZ3VhcmRlZCIsImdsb2JhbCJdLCJtYXBwaW5ncyI6IkFBV0EsSUFBSUEsUUFBUSxHQUFHLENBQWY7O0FBVUEsSUFBSUMsY0FBNEIsR0FBRyxTQUFTQyxPQUFULENBQ2pDQyxDQURpQyxFQUVqQ0MsT0FGaUMsRUFHakM7QUFDQSxRQUFNRCxDQUFOO0FBQ0QsQ0FMRDs7QUFlQSxJQUFNRSxVQUFVLEdBQUc7QUFDakJDLEVBQUFBLGdCQURpQiw0QkFDQUMsR0FEQSxFQUN5QjtBQUN4Q04sSUFBQUEsY0FBYyxHQUFHTSxHQUFqQjtBQUNELEdBSGdCO0FBSWpCQyxFQUFBQSxnQkFKaUIsOEJBSWdCO0FBQy9CLFdBQU9QLGNBQVA7QUFDRCxHQU5nQjtBQU9qQlEsRUFBQUEsV0FQaUIsdUJBT0xDLEtBUEssRUFPZTtBQUM5QlQsSUFBQUEsY0FBYyxJQUFJQSxjQUFjLENBQUNTLEtBQUQsRUFBUSxLQUFSLENBQWhDO0FBQ0QsR0FUZ0I7QUFVakJDLEVBQUFBLGdCQVZpQiw0QkFVQUQsS0FWQSxFQVVvQjtBQUVuQ1QsSUFBQUEsY0FBYyxJQUFJQSxjQUFjLENBQUNTLEtBQUQsRUFBUSxJQUFSLENBQWhDO0FBQ0QsR0FiZ0I7QUFjakJFLEVBQUFBLGNBZGlCLDBCQWVmTCxHQWZlLEVBZ0JmTSxPQWhCZSxFQWlCZkMsSUFqQmUsRUFtQmZDLGNBbkJlLEVBcUJmQyxXQXJCZSxFQXNCUjtBQUNQLFFBQUk7QUFDRmhCLE1BQUFBLFFBQVE7QUFFUixhQUFPTyxHQUFHLENBQUNVLEtBQUosQ0FBVUosT0FBVixFQUFtQkMsSUFBbkIsQ0FBUDtBQUNELEtBSkQsQ0FJRSxPQUFPWCxDQUFQLEVBQVU7QUFDVkUsTUFBQUEsVUFBVSxDQUFDSSxXQUFYLENBQXVCTixDQUF2QjtBQUNELEtBTkQsU0FNVTtBQUNSSCxNQUFBQSxRQUFRO0FBQ1Q7O0FBQ0QsV0FBTyxJQUFQO0FBQ0QsR0FqQ2dCO0FBa0NqQmtCLEVBQUFBLHNCQWxDaUIsa0NBbUNmWCxHQW5DZSxFQW9DZk0sT0FwQ2UsRUFxQ2ZDLElBckNlLEVBc0NSO0FBQ1AsUUFBSVQsVUFBVSxDQUFDYyxPQUFYLEVBQUosRUFBMEI7QUFFeEIsYUFBT1osR0FBRyxDQUFDVSxLQUFKLENBQVVKLE9BQVYsRUFBbUJDLElBQW5CLENBQVA7QUFDRCxLQUhELE1BR087QUFDTFQsTUFBQUEsVUFBVSxDQUFDTyxjQUFYLENBQTBCTCxHQUExQixFQUErQk0sT0FBL0IsRUFBd0NDLElBQXhDO0FBQ0Q7O0FBQ0QsV0FBTyxJQUFQO0FBQ0QsR0E5Q2dCO0FBK0NqQkssRUFBQUEsT0EvQ2lCLHFCQStDRTtBQUNqQixXQUFPLENBQUMsQ0FBQ25CLFFBQVQ7QUFDRCxHQWpEZ0I7QUFrRGpCb0IsRUFBQUEsS0FsRGlCLGlCQW1EZmIsR0FuRGUsRUFvRGZjLElBcERlLEVBcURmUixPQXJEZSxFQXNETztBQUFBOztBQUd0QixRQUFJLE9BQU9OLEdBQVAsS0FBZSxVQUFuQixFQUErQjtBQUM3QmUsTUFBQUEsT0FBTyxDQUFDQyxJQUFSLENBQWEscURBQWIsRUFBb0VoQixHQUFwRTtBQUNBLGFBQU8sSUFBUDtBQUNEOztBQUNELFFBQU1pQixTQUFTLFdBQUdILElBQUgsV0FBR0EsSUFBSCxHQUFXZCxHQUFHLENBQUNjLElBQWYsbUJBQXVCLG1CQUF0Qzs7QUFDQSxhQUFTSSxPQUFULEdBQXdDO0FBQUEsd0NBQXBCWCxJQUFvQjtBQUFwQkEsUUFBQUEsSUFBb0I7QUFBQTs7QUFDdEMsYUFBT1QsVUFBVSxDQUFDTyxjQUFYLENBQ0xMLEdBREssRUFFTE0sT0FGSyxXQUVMQSxPQUZLLEdBRU0sSUFGTixFQUdMQyxJQUhLLEVBSUwsSUFKSyxFQUtMVSxTQUxLLENBQVA7QUFPRDs7QUFFRCxXQUFPQyxPQUFQO0FBQ0Q7QUF6RWdCLENBQW5CO0FBNEVBQyxNQUFNLENBQUNyQixVQUFQLEdBQW9CQSxVQUFwQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBGYWNlYm9vaywgSW5jLiBhbmQgaXRzIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZvcm1hdFxuICogQGZsb3cgc3RyaWN0XG4gKiBAcG9seWZpbGxcbiAqL1xuXG5sZXQgX2luR3VhcmQgPSAwO1xuXG50eXBlIEVycm9ySGFuZGxlciA9IChlcnJvcjogbWl4ZWQsIGlzRmF0YWw6IGJvb2xlYW4pID0+IHZvaWQ7XG50eXBlIEZuPEFyZ3MsIFJldHVybj4gPSAoLi4uQXJncykgPT4gUmV0dXJuO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGVycm9yIGhhbmRsZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiB3ZSBlbmNvdW50ZXIgYW4gZXhjZXB0aW9uXG4gKiB3aGVuIGxvYWRpbmcgYSBtb2R1bGUuIFRoaXMgd2lsbCByZXBvcnQgYW55IGVycm9ycyBlbmNvdW50ZXJlZCBiZWZvcmVcbiAqIEV4Y2VwdGlvbnNNYW5hZ2VyIGlzIGNvbmZpZ3VyZWQuXG4gKi9cbmxldCBfZ2xvYmFsSGFuZGxlcjogRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24gb25FcnJvcihcbiAgZTogbWl4ZWQsXG4gIGlzRmF0YWw6IGJvb2xlYW4sXG4pIHtcbiAgdGhyb3cgZTtcbn07XG5cbi8qKlxuICogVGhlIHBhcnRpY3VsYXIgcmVxdWlyZSBydW50aW1lIHRoYXQgd2UgYXJlIHVzaW5nIGxvb2tzIGZvciBhIGdsb2JhbFxuICogYEVycm9yVXRpbHNgIG9iamVjdCBhbmQgaWYgaXQgZXhpc3RzLCB0aGVuIGl0IHJlcXVpcmVzIG1vZHVsZXMgd2l0aCB0aGVcbiAqIGVycm9yIGhhbmRsZXIgc3BlY2lmaWVkIHZpYSBFcnJvclV0aWxzLnNldEdsb2JhbEhhbmRsZXIgYnkgY2FsbGluZyB0aGVcbiAqIHJlcXVpcmUgZnVuY3Rpb24gd2l0aCBhcHBseVdpdGhHdWFyZC4gU2luY2UgdGhlIHJlcXVpcmUgbW9kdWxlIGlzIGxvYWRlZFxuICogYmVmb3JlIGFueSBvZiB0aGUgbW9kdWxlcywgdGhpcyBFcnJvclV0aWxzIG11c3QgYmUgZGVmaW5lZCAoYW5kIHRoZSBoYW5kbGVyXG4gKiBzZXQpIGdsb2JhbGx5IGJlZm9yZSByZXF1aXJpbmcgYW55dGhpbmcuXG4gKi9cbmNvbnN0IEVycm9yVXRpbHMgPSB7XG4gIHNldEdsb2JhbEhhbmRsZXIoZnVuOiBFcnJvckhhbmRsZXIpOiB2b2lkIHtcbiAgICBfZ2xvYmFsSGFuZGxlciA9IGZ1bjtcbiAgfSxcbiAgZ2V0R2xvYmFsSGFuZGxlcigpOiBFcnJvckhhbmRsZXIge1xuICAgIHJldHVybiBfZ2xvYmFsSGFuZGxlcjtcbiAgfSxcbiAgcmVwb3J0RXJyb3IoZXJyb3I6IG1peGVkKTogdm9pZCB7XG4gICAgX2dsb2JhbEhhbmRsZXIgJiYgX2dsb2JhbEhhbmRsZXIoZXJyb3IsIGZhbHNlKTtcbiAgfSxcbiAgcmVwb3J0RmF0YWxFcnJvcihlcnJvcjogbWl4ZWQpOiB2b2lkIHtcbiAgICAvLyBOT1RFOiBUaGlzIGhhcyBhbiB1bnR5cGVkIGNhbGwgc2l0ZSBpbiBNZXRyby5cbiAgICBfZ2xvYmFsSGFuZGxlciAmJiBfZ2xvYmFsSGFuZGxlcihlcnJvciwgdHJ1ZSk7XG4gIH0sXG4gIGFwcGx5V2l0aEd1YXJkPFRBcmdzOiAkUmVhZE9ubHlBcnJheTxtaXhlZD4sIFRPdXQ+KFxuICAgIGZ1bjogRm48VEFyZ3MsIFRPdXQ+LFxuICAgIGNvbnRleHQ/OiA/bWl4ZWQsXG4gICAgYXJncz86ID9UQXJncyxcbiAgICAvLyBVbnVzZWQsIGJ1dCBzb21lIGNvZGUgc3luY2VkIGZyb20gd3d3IHNldHMgaXQgdG8gbnVsbC5cbiAgICB1bnVzZWRfb25FcnJvcj86IG51bGwsXG4gICAgLy8gU29tZSBjYWxsZXJzIHBhc3MgYSBuYW1lIGhlcmUsIHdoaWNoIHdlIGlnbm9yZS5cbiAgICB1bnVzZWRfbmFtZT86ID9zdHJpbmcsXG4gICk6ID9UT3V0IHtcbiAgICB0cnkge1xuICAgICAgX2luR3VhcmQrKztcbiAgICAgIC8vICRGbG93Rml4TWU6IFRPRE8gVDQ4MjA0NzQ1ICgxKSBhcHBseShjb250ZXh0LCBudWxsKSBpcyBmaW5lLiAoMikgYXJyYXkgLT4gcmVzdCBhcnJheSBzaG91bGQgd29ya1xuICAgICAgcmV0dXJuIGZ1bi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBFcnJvclV0aWxzLnJlcG9ydEVycm9yKGUpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBfaW5HdWFyZC0tO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgYXBwbHlXaXRoR3VhcmRJZk5lZWRlZDxUQXJnczogJFJlYWRPbmx5QXJyYXk8bWl4ZWQ+LCBUT3V0PihcbiAgICBmdW46IEZuPFRBcmdzLCBUT3V0PixcbiAgICBjb250ZXh0PzogP21peGVkLFxuICAgIGFyZ3M/OiA/VEFyZ3MsXG4gICk6ID9UT3V0IHtcbiAgICBpZiAoRXJyb3JVdGlscy5pbkd1YXJkKCkpIHtcbiAgICAgIC8vICRGbG93Rml4TWU6IFRPRE8gVDQ4MjA0NzQ1ICgxKSBhcHBseShjb250ZXh0LCBudWxsKSBpcyBmaW5lLiAoMikgYXJyYXkgLT4gcmVzdCBhcnJheSBzaG91bGQgd29ya1xuICAgICAgcmV0dXJuIGZ1bi5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgRXJyb3JVdGlscy5hcHBseVdpdGhHdWFyZChmdW4sIGNvbnRleHQsIGFyZ3MpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcbiAgaW5HdWFyZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISFfaW5HdWFyZDtcbiAgfSxcbiAgZ3VhcmQ8VEFyZ3M6ICRSZWFkT25seUFycmF5PG1peGVkPiwgVE91dD4oXG4gICAgZnVuOiBGbjxUQXJncywgVE91dD4sXG4gICAgbmFtZT86ID9zdHJpbmcsXG4gICAgY29udGV4dD86ID9taXhlZCxcbiAgKTogPyguLi5UQXJncykgPT4gP1RPdXQge1xuICAgIC8vIFRPRE86IChtb3RpKSBUNDgyMDQ3NTMgTWFrZSBzdXJlIHRoaXMgd2FybmluZyBpcyBuZXZlciBoaXQgYW5kIHJlbW92ZSBpdCAtIHR5cGVzXG4gICAgLy8gc2hvdWxkIGJlIHN1ZmZpY2llbnQuXG4gICAgaWYgKHR5cGVvZiBmdW4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybignQSBmdW5jdGlvbiBtdXN0IGJlIHBhc3NlZCB0byBFcnJvclV0aWxzLmd1YXJkLCBnb3QgJywgZnVuKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBndWFyZE5hbWUgPSBuYW1lID8/IGZ1bi5uYW1lID8/ICc8Z2VuZXJhdGVkIGd1YXJkPic7XG4gICAgZnVuY3Rpb24gZ3VhcmRlZCguLi5hcmdzOiBUQXJncyk6ID9UT3V0IHtcbiAgICAgIHJldHVybiBFcnJvclV0aWxzLmFwcGx5V2l0aEd1YXJkKFxuICAgICAgICBmdW4sXG4gICAgICAgIGNvbnRleHQgPz8gdGhpcyxcbiAgICAgICAgYXJncyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZ3VhcmROYW1lLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ3VhcmRlZDtcbiAgfSxcbn07XG5cbmdsb2JhbC5FcnJvclV0aWxzID0gRXJyb3JVdGlscztcblxuZXhwb3J0IHR5cGUgRXJyb3JVdGlsc1QgPSB0eXBlb2YgRXJyb3JVdGlscztcbiJdfQ==